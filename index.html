<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rádio Pedrada na Pleura</title>

  <!-- Cor do tema (Android) -->
  <meta name="theme-color" content="#000000">

  <!-- Manifest PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">

  <!-- iPhone / iOS -->
  <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Pedrada">

  <!-- Melhor renderização -->
  <meta name="mobile-web-app-capable" content="yes">
</head>
<body>

<header>
  <img src="logo.png" alt="Pedrada na Pleura"
       style="width:180px; max-width:80%; margin-bottom:20px;">

  <h1>PEDRADA NA PLEURA</h1>
  <div class="sub">A Frequência da Resistência</div>
  <div class="live">🔴 AO VIVO AGORA</div>
</header>

<div class="player-box">
  <audio id="radio" src="https://stream.zeno.fm/4yhhgfnjxgwuv"></audio>

  <button id="playBtn" onclick="toggleRadio()">🔥 ROOTS PLAY</button>

  <div style="margin-top:20px;">
    🔊 Volume
    <input type="range" id="volume" min="0" max="1" step="0.01" value="0.7">
  </div>

  <div class="music-name" id="music">Carregando música...</div>
</div>

<a class="whatsapp" href="https://wa.me/5551983457216" target="_blank">
  WhatsApp
</a>

<script>
const radio = document.getElementById("radio");
const volume = document.getElementById("volume");
const playBtn = document.getElementById("playBtn");
const music = document.getElementById("music");

radio.volume = 0.7;

volume.addEventListener("input", function() {
  radio.volume = this.value;
});

let playing = false;

function toggleRadio(){
  if(!playing){
    radio.play();
    playing = true;
    playBtn.innerHTML = "⏸ PAUSAR";
  } else {
    radio.pause();
    playing = false;
    playBtn.innerHTML = "🔥 ROOTS PLAY";
  }
}

/* ===== NOW PLAYING ZENO ===== */

async function atualizarMusica() {
  try {
    const resposta = await fetch("https://api.zeno.fm/mounts/metadata/4yhhgfnjxgwuv");
    const dados = await resposta.json();

    if (dados && dados.streamTitle) {
      music.innerText = dados.streamTitle;
    } else {
      music.innerText = "Ao Vivo";
    }

  } catch (erro) {
    music.innerText = "Ao Vivo";
  }
}

atualizarMusica();
setInterval(atualizarMusica, 15000);

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>